"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function sendRequest(e,n,t,u){return new Promise(function(r,a){_wepy2.default.request({url:_config2.default.httpServerUrl+e,data:t,header:u,method:"POST"===n?"POST":"GET",success:function(e){handleSuccess(e).then(r,a)},fail:function(e){handleFail(e).then(r,a)}})})}function handleSuccess(e){return new Promise(function(n,t){if("request:ok"===e.errMsg||"uploadFile:ok"===e.errMsg)if(e.data&&e.data.Flag)n(e.data);else{var u={rejectType:"REQ_ERROR",data:e.data};t(u)}else{t({rejectType:"REQ_FAIL"})}})}function handleFail(e){return new Promise(function(e,n){n({rejectType:"REQ_FAIL"})})}Object.defineProperty(exports,"__esModule",{value:!0});var _wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_config=require("./../config.js"),_config2=_interopRequireDefault(_config);exports.default={get:function(e,n,t){return sendRequest(e,"GET",n,t)},post:function(e,n,t){return sendRequest(e,"POST",n,t)},uploadFile:function(e,n,t){return new Promise(function(u,r){_wepy2.default.uploadFile({url:_config2.default.fileUploadServer+e,filePath:n,name:"file",formData:t,success:function(e){console.log("上传成功"),console.log(e),e.data=JSON.parse(e.data),handleSuccess(e).then(u,r)},fail:function(e){handleFail(e).then(u,r)}})})}};