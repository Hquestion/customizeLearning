"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(r,t,a){return t&&e(r.prototype,t),a&&e(r,a),r}}(),_wepy=require("./../../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_courseDetail=require("./../../components/course-detail.js"),_courseDetail2=_interopRequireDefault(_courseDetail),_panel=require("./../../components/panel.js"),_panel2=_interopRequireDefault(_panel),_remarkTpl=require("./../../components/remark-tpl.js"),_remarkTpl2=_interopRequireDefault(_remarkTpl),_wxParse=require("./../../wxParse/wxParse.js"),_wxParse2=_interopRequireDefault(_wxParse),_api=require("./../../api/index.js"),_util=require("./../../util/index.js"),prevKnow=function(e){function r(){var e,t,a,n;_classCallCheck(this,r);for(var o=arguments.length,i=Array(o),p=0;p<o;p++)i[p]=arguments[p];return t=a=_possibleConstructorReturn(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(i))),a.config={navigationBarTitleText:"早知道"},a.data={isTeacher:!1,userInfo:null,courseInfo:null,prevKnowContent:"",remarkStandardList:[],queryParam:null,navigateUrlMap:{arrange:"/practice/pages/arrange",practice:"/pages/practice",practiceOpenType:"switchTab",think:"/practice/pages/think"},isStuInGroup:!1},a.$repeat={remarkStandardList:{com:"remark-tpl",props:"remarkInfo.sync"}},a.$props={"remark-tpl":{"v-bind:remarkInfo.sync":{value:"item",type:"item",for:"remarkStandardList",item:"item",index:"index",key:"key"}},"course-detail":{"xmlns:v-bind":"","v-bind:courseInfo.sync":"courseInfo"},panel:{class:"remark-standard-panel"}},a.$events={},a.components={"course-detail":_courseDetail2.default,panel:_panel2.default,"remark-tpl":_remarkTpl2.default},n=t,_possibleConstructorReturn(a,n)}return _inherits(r,e),_createClass(r,[{key:"init",value:function(){var e=this,r=void 0;r=this.queryParam?this.queryParam:_wepy2.default.getStorageSync("activeTaskInfo"),(0,_api.getCourseDetailById)(r.CourseFID).then(function(t){(0,_api.getGroupDetail)(r.GroupFID).then(function(r){t.groupMembers=r.AttendMembers?r.GroupLeaderName+","+r.AttendMembers:r.GroupLeaderName,t.showCreateTime=(0,_util.parseTime)(t.CreateTime),t.showOpenStartTime=(0,_util.parseTime)(t.OpenStartTime),t.showOpenEndTime=(0,_util.parseTime)(t.OpenEndTime),e.courseInfo=t,e.$apply()})}),(0,_api.getPrevKnowByCourse)(r.CourseFID).then(function(r){e.prevKnowContent=r.KnowContent,_wxParse2.default.wxParse("knowContent","html",r.KnowContent,e,5),e.$apply()}),(0,_api.getRemarkStandard)(r.CourseFID).then(function(r){e.remarkStandardList=r,e.$apply()}),(0,_api.isStuInCourseGroup)(this.$parent.globalData.userInfo.FlnkID,r.CourseFID,r.GroupFID).then(function(r){e.isStuInGroup=r,e.$apply()},function(){e.isStuInGroup=!1,e.$apply()})}},{key:"onLoad",value:function(e){var r=this;this.$parent.getUserInfo(function(e){r.userInfo=e,r.$apply()}),e&&e.courseId&&(this.queryParam={CourseFID:e.courseId,GroupFID:e.groupId},this.navigateUrlMap={arrange:"/practice/pages/arrange?courseId="+e.courseId+"&groupId="+e.groupId,practice:"/practice/pages/reviewFinishTask?courseId="+e.courseId+"&groupId="+e.groupId,practiceOpenType:"redirect",think:"/practice/pages/think?courseId="+e.courseId+"&groupId="+e.groupId},this.$apply()),this.isTeacher=this.$parent.globalData.userInfo.RoleNum+""=="2",this.init()}}]),r}(_wepy2.default.page);Page(require("./../../npm/wepy/lib/wepy.js").default.$createPage(prevKnow,"practice/pages/prevKnow"));